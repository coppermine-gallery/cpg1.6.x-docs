<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<title>Variables &amp; Constants - Coppermine Photo Gallery - Documentation &amp; Manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="language" content="en" />
<meta name="copyright" content="Coppermine dev team" />
<meta name="description" content="tutorial for the Coppermine plugin API" />
<!--
  Coppermine version: 1.6.03
  $HeadURL$
-->
<link rel="stylesheet" type="text/css" href="../style/style.css" media="all" />
<link rel="stylesheet" type="text/css" href="../style/screen.css" media="screen" />
<link rel="stylesheet" type="text/css" href="../style/print.css" media="print" />
<link rel="shortcut icon" href="../favicon.ico" />
<script src="../js/jquery.js" type="text/javascript"></script>
<script src="../js/jquery.treeview.js" type="text/javascript"></script>
<script src="script.js" type="text/javascript"></script>
</head>
<body>
<h1 id="docheader">Coppermine Photo Gallery v1.6.x: Documentation and Manual</h1>
<div id="toc">
<a href="toc.htm">Table of Contents</a>
</div>

<a id="vars_constants"></a><h1>Variables &amp; Constants<a href="#vars_constants" title="Link to this section"><img src="images/anchor.gif" width="15" height="9" alt="" /></a></h1>

<a id="vars_constants_system"></a>
<h3>System Global Variables<a href="#vars_constants_system" title="Link to this section"><img src="images/anchor.gif" width="15" height="9" alt="" /></a></h3>
<p>Global <a href="http://www.php.net/manual/en/language.variables.php" rel="external" class="phpnet">variables</a> are being populated once, but can be change during runtime. You can use the global variables from within your plugins, but don't forget to <a href="http://www.php.net/manual/en/language.variables.scope.php" rel="external" class="phpnet">make them global</a> when using from within functions or classes.</p>
<table class="cpg_zebra">
    <tr>
        <th class="tableh1">
            Variable name
        </th>
        <th class="tableh1">
            Defined in
        </th>
        <th class="tableh1">
            Type
        </th>
        <th class="tableh1">
            Description
        </th>
    </tr>
    <tr>
        <td>
            <span class="code">$superCage</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
        </td>
        <td>
            Construct used to contain the server vars (<a href="http://www.php.net/manual/en/reserved.variables.php" rel="external" class="phpnet">predefined variables</a>) <a href="dev_superglobals.htm">sanitized by Inspekt</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$CONFIG</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Associative <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            All values of the coppermine <a href="configuration.htm">configuration</a>.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$CPG_PHP_SELF</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            <a href="http://www.php.net/manual/en/language.types.string.php" rel="external" class="phpnet">String</a>
        </td>
        <td>
            Replacement for the potentially less secure superglobal $_SERVER['PHP_SELF'], $PHP_SELF and similar that may or may not exist on particular servers that get's removed in Coppermine using <a href="dev_superglobals.htm">Inspekt</a>.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$REFERER</span> / <span class="code">$CPG_REFERER</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            <a href="http://www.php.net/manual/en/language.types.string.php" rel="external" class="phpnet">String</a>
        </td>
        <td>
            Slightly sanitized improvement to the super global query string.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$LINEBREAK</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            <a href="http://www.php.net/manual/en/language.types.string.php" rel="external" class="phpnet">String</a>
        </td>
        <td>
            String containing a line break that will work both under *nix as well as Windows.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$BRIDGE</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span> / bridge file
        </td>
        <td>
            Associative <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            Bridging variable - contains all bridge settings.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$USER</span>
        </td>
        <td>
            <span class="code"></span>
        </td>
        <td>
            Associative <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$USER_DATA</span>
        </td>
        <td>
            <span class="code"></span>
        </td>
        <td>
            Associative <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$THEME_DIR</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            <a href="http://www.php.net/manual/en/language.types.string.php" rel="external" class="phpnet">String</a>
        </td>
        <td>
            The folder name of the theme set in config.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$ICON_DIR</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            <a href="http://www.php.net/manual/en/language.types.string.php" rel="external" class="phpnet">String</a>
        </td>
        <td>
            The directory where the iconset resides at: if the theme comes with icons, the variable will point to the icons subfolder of the theme. Otherwise, the default icon folder will be used.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$FAVPICS</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Indexed <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            The favorites of the current visitor.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$RESTRICTEDWHERE</span>
        </td>
        <td>
            <span class="code">include/functions.inc.php</span>
        </td>
        <td>
        </td>
        <td>
            
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$FORBIDDEN_SET_DATA</span>
        </td>
        <td>
            <span class="code">include/functions.inc.php</span>
        </td>
        <td>
            Indexed <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            List of albums that the current visitor is <strong>not</strong> allowed to access.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$CURRENT_ALBUM_KEYWORD</span>
        </td>
        <td>
            <span class="code">include/functions.inc.php</span>
        </td>
        <td>
        </td>
        <td>
            
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$CURRENT_CAT_DEPTH</span>
        </td>
        <td>
            <span class="code">include/functions.inc.php</span>
        </td>
        <td>
        </td>
        <td>
            
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$FORBIDDEN_SET</span>
        </td>
        <td>
            <span class="code">include/functions.inc.php</span>
        </td>
        <td>
        </td>
        <td>
            
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$CURRENT_CAT_NAME</span>
        </td>
        <td>
            <span class="code">include/functions.inc.php</span>
        </td>
        <td>
        </td>
        <td>
            
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$CPG_PLUGINS</span>
        </td>
        <td>
            <span class="code"></span>
        </td>
        <td>
            Multi-dimensional <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            First level contains an indexed array where each index corresponds to the unique ID of an installed plugin inside the plugins table.<br />
            The second level contains an associative array that contains all plugin actions and filters as well as the name, path and priority.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">$JS</span>
        </td>
        <td>
            <span class="code"></span>
        </td>
        <td>
            Associative <a href="http://www.php.net/manual/en/language.types.array.php" rel="external" class="phpnet">array</a>
        </td>
        <td>
            Multidimensional array that contains
            <ul>
                <li>An array of variables handed over to the external JavaScript files, e.g. translation strings. Some variables are always populated, like the site_url, the icon_dir, the translation for the word "close" (lang_close) and the corresponding icon (icon_close_path)</li>
                <li>An indexed array of includes: in this list, all JavaScript files that get included are present. Usually, this list at least contains <span class="code">js/jquery-1.4.2.js</span>, <span class="code">js/scripts.js</span>, <span class="code">js/jquery.greybox.js</span> (if the help feature is enabled in config) and <span class="code">js/jquery.elastic.js</span>. The items in this are processed in the order they are indexed except for the jquery file itself - it always get's included first no matter what to make sure all subsequent calls work as expected.</li>
            </ul>
        </td>
    </tr>
</table>

<abbr title="to be continued">tbc</abbr> (list is incomplete). All devs please contribute and populate the list.
<p><a class="back" href="#top">Back to top</a></p><hr />

<a id="vars_constants_constants"></a>
<h3>Coppermine Constants<a href="#vars_constants_constants" title="Link to this section"><img src="images/anchor.gif" width="15" height="9" alt="" /></a></h3>
<p><a href="http://www.php.net/manual/en/language.constants.php" rel="external" class="phpnet">Constants</a> are being populated once. They can not be changed during runtime. You can use the coppermine constants from within your plugins.</p>
<table class="cpg_zebra">
    <tr>
        <th class="tableh1">
            Constant name
        </th>
        <th class="tableh1">
            Defined in
        </th>
        <th class="tableh1">
            Description
        </th>
    </tr>
    <tr>
        <td>
            <span class="code">COPPERMINE_VERSION</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            The version of coppermine
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">COPPERMINE_VERSION_STATUS</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            The status of your coppermine version (alpha, beta or stable)
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">IN_COPPERMINE</span>
        </td>
        <td>
            <span class="code">Coppermine core files that are meant to be run directly in the browser</span>
        </td>
        <td>
            The constant makes sure that include files are not being run directly: the files that are meant to be run contain the constant definition and after that the include command. The include files don't contain the constant definition, but a conditional die. To make sure that your plugin files aren't being run directly, add the following line at the top:
            <pre>if (!defined('IN_COPPERMINE')) {
    die('Not in Coppermine...');
}</pre>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">DEFAULT_LANGUAGE</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Default language (set up by the admin) in config (may differ from <span class="code">$CONFIG['lang']</span> during runtime, as that may have been overridden.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">UDB_INTEGRATION</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Name of the bridge file.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">GALLERY_ADMIN_MODE</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            If populated, the user is an admin and <a href="admin_menu.htm#admin_user_mode">admin-menu</a> hasn't been turned off. It's recommended to use this constant to check if the admin is logged in. Use code like this:
            <pre>if (!GALLERY_ADMIN_MODE) {
    cpg_die(ERROR, $lang_errors['access_denied'], __FILE__, __LINE__);
}</pre>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">USER_IS_ADMIN</span>
        </td>
        <td>
            <span class="code">bridge/your_bridge_file.inc.php</span> (by default: <span class="code">bridge/udb_base.inc.php</span>)
        </td>
        <td>
            If populated, the user is an admin.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">USER_ADMIN_MODE</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            The &quot;user admin mode&quot; hardly is used any longer - it's a relict from cpg1.3.x and might be dropped in future versions. The definition is
            <pre>define('USER_ADMIN_MODE', USER_ID && USER_CAN_CREATE_ALBUMS && !GALLERY_ADMIN_MODE);</pre>
            so it get's populated if a user is logged in and has permission to have personal albums. The constant does not get populated if an admin is logged in, unless he hides the admin controls.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">USER_ID</span>
        </td>
        <td>
            <span class="code">bridge/your_bridge_file.inc.php</span> (by default: <span class="code">bridge/udb_base.inc.php</span>)
        </td>
        <td>
            The user ID of the logged in user - helpfull to send the user to his profile.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">USER_CAN_CREATE_ALBUMS</span>
        </td>
        <td>
            <span class="code">bridge/your_bridge_file.inc.php</span> (by default: <span class="code">bridge/udb_base.inc.php</span>)
        </td>
        <td>
            The name of this constant may be a bit misleading: actually, it doesn't show if the user has got permission to create albums in public categories. Instead, it just shows if the user is allowed to have personal galleries.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">USER_GROUP_SET</span>
        </td>
        <td>
            <span class="code">bridge/your_bridge_file.inc.php</span> (by default: <span class="code">bridge/udb_base.inc.php</span>)
        </td>
        <td>
            Contains the groups the user is a member of (as a coma-separated list).
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_MENU_ICONS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_menu_icon">THEME_HAS_MENU_ICONS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_RATING_GRAPHICS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_rating_graphic">THEME_HAS_RATING_GRAPHICS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_COMMENT_GRAPHICS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_comment_graphic">THEME_HAS_COMMENT_GRAPHICS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_NAVBAR_GRAPHICS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_navbar_graphic">THEME_HAS_NAVBAR_GRAPHICS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_FILM_STRIP_GRAPHIC</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            If set, the top and bottom graphic tile for the theme will use the file themes/yourtheme/images/tile.gif<br />
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_filmstrip_graphic">THEME_HAS_FILM_STRIP_GRAPHIC</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_FILM_STRIP_GRAPHICS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            If set, the top graphic tile for the theme will use the file themes/yourtheme/images/tile1.gif and the bottom graphic tile for the theme will use the file themes/yourtheme/images/tile2.gif
            <br />For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_filmstrip_graphics">THEME_HAS_FILM_STRIP_GRAPHICS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_NO_SYS_MENU_BUTTONS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_no_sysmenu">THEME_HAS_NO_SYS_MENU_BUTTONS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_NO_SUB_MENU_BUTTONS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_no_submenu">THEME_HAS_NO_SUB_MENU_BUTTONS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">THEME_HAS_PROGRESS_GRAPHICS</span>
        </td>
        <td>
            <span class="code">themes/yourtheme/theme.php</span>
        </td>
        <td>
            For details, refer to <a href="theme.htm">Themes</a> &rarr; <a href="theme_theme_php.htm">Editing theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_php_list">list of items in theme.php</a> &rarr; <a href="theme_theme_php.htm#theme_create_theme_progress">THEME_HAS_PROGRESS_GRAPHICS</a>
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">USER_GAL_CAT</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Category ID that contains the user galleries. Always is set to 1.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">FIRST_USER_CAT</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Value for the first ID of the user gallery category - this is where the numbering scheme starts. By default is set to 10000, which should give all admins plenty of room for admin-defined categories (possible IDs 2 to 9999).
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">TEMPLATE_FILE</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Default is <span class="code">template.html</span>. Don't change unless you really know what you're doing.
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">INFORMATION</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Constant used by the cpg_die function to hard-code the caption of a die message
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">ERROR</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Constant used by the cpg_die function to hard-code the caption of a die message
        </td>
    </tr>
    <tr>
        <td>
            <span class="code">CRITICAL_ERROR</span>
        </td>
        <td>
            <span class="code">include/init.inc.php</span>
        </td>
        <td>
            Constant used by the cpg_die function to hard-code the caption of a die message
        </td>
    </tr>
</table>
<abbr title="to be continued">tbc</abbr> (list is incomplete). All devs please contribute and populate the list.
<p><a class="back" href="#top">Back to top</a></p><hr />


<div id="doc_footer">
    <div class="doc_info_wrapper">
        <span id="doc_last_changed">$LastChangedDate$</span>
    </div>
</div>
</body>
</html>